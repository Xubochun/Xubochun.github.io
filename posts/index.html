<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Posts | Xubo’Log</title><meta name=keywords content><meta name=description content="Posts - Xubo’Log"><meta name=author content="Jackson"><link rel=canonical href=https://xubochun.github.io/posts/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.7140587df96a2b1a49eb723fa7063dc0c641a6cb638f3140e8d3beb4deae4f5c.css integrity="sha256-cUBYfflqKxpJ63I/pwY9wMZBpstjjzFA6NO+tN6uT1w=" rel="preload stylesheet" as=style><link rel=icon href=https://xubochun.github.io/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=https://xubochun.github.io/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://xubochun.github.io/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://xubochun.github.io/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://xubochun.github.io/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://xubochun.github.io/posts/index.xml><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-123-45","auto"),ga("send","pageview"))</script><meta property="og:title" content="Posts"><meta property="og:description" content="My personal web"><meta property="og:type" content="website"><meta property="og:url" content="https://xubochun.github.io/posts/"><meta property="og:image" content="https://xubochun.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="og:site_name" content="Xubo’Log"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://xubochun.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="Posts"><meta name=twitter:description content="My personal web"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://xubochun.github.io/posts/"}]}</script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://xubochun.github.io/ accesskey=h title="Xubo’Log (Alt + H)">Xubo’Log</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://xubochun.github.io/ title=Posts><span>Posts</span></a></li><li><a href=https://xubochun.github.io/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://xubochun.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://xubochun.github.io/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://jacksonxu-notes.blogspot.com/ title="jackson.xu notes"><span>jackson.xu notes</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><header class=page-header><h1>Posts
<a href=/posts/index.xml title=RSS aria-label=RSS><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" height="23"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a></h1></header><article class=post-entry><header class=entry-header><h2>區塊鏈(六) - 在私有鏈上部署智能合約 Part 2</h2></header><div class=entry-content><p>劇情回顧：
區塊鏈(一) - 建立以太坊私有鏈 區塊鏈(二) - 創建虛擬錢包 區塊鏈(三) - MetaMask 加密貨幣錢包 區塊鏈(四) - 智能合約的開發工具 區塊鏈(五) - 在私有鏈上部署智能合約 Part 1 此篇是第五集的延伸，希望從 Remix 上測試好智能合約以後，就直接部署到私有鏈中。還記不記得前幾集，我們安裝了 MetaMask 的錢包，這時候我們可以利用它當作 Remix 和私有鏈之間的橋樑。
說得簡單一點，就是 Remix 透過 MetaMask 錢包替我們發送 智能合約 到私有鏈中等待驗證。
完成編譯後的智能合約，可以到部署的頁面先選擇環境「Injected Web3」，然後按下「Deploy」。
Fig. 1. injected web3. Google Chrome 會自動彈出 MetaMask 的視窗，這是要我們授權它使用 MetaMask 錢包。
Fig. 2. google chrome extension metamask. 請記得選擇從私有鏈建立的帳戶（Account）。
確認部署資訊後，可以按下「Confirm」。這樣在你的 Cmd 端就會看到有一項交易正在等待驗證。
Fig. 3. confirm-transaction. 只需要進行挖礦來驗證這筆交易，即可完成部署。
Fig. 4. miner. 當這個合約成功加入區塊後，從 Remix 網頁的下方會出現一個智能合約。這個區域就像上集介紹的部分，可以操作合約。
Fig. 5. remix smart contract....</p></div><footer class=entry-footer><span title='2022-12-06 20:35:00 +0800 CST'>December 6, 2022</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;84 words&nbsp;·&nbsp;Xubo</footer><a class=entry-link aria-label="post link to 區塊鏈(六) - 在私有鏈上部署智能合約 Part 2" href=https://xubochun.github.io/posts/2022-12-06-deploy-smart-contracts-on-private-chains-2/></a></article><article class=post-entry><header class=entry-header><h2>區塊鏈(五) - 在私有鏈上部署智能合約 Part 1</h2></header><div class=entry-content><p>劇情回顧：
區塊鏈(一) - 建立以太坊私有鏈 區塊鏈(二) - 創建虛擬錢包 區塊鏈(三) - MetaMask 加密貨幣錢包 區塊鏈(四) - 智能合約的開發工具 上一集提到可以利用 Remix-Ethereum IDE 來撰寫智能合約以及測試智能合約，如果還不熟悉過程的快去看看喔！
首先，這是很多人的疑問，就是雖然可以在線上進行智能合約的測試，但如果要將寫好的合約部署到私有鏈上該怎麼做呢？
其中，有兩個方法可以進行：
第一種部署智能合約的方法 當我們寫好一個智能合約時，就像寫一段程式碼一樣，需要將這段程式碼進行編譯。完成編譯後，可以將目光轉移到下方的三個按鈕。
最下面一個「Compilation Details」點擊後會出現有關這項合約的詳細資訊。
Fig. 1. compilation details. 在這裡，我們可以找到「WEB3DEPLOY」的標題。
下方所寫的內容其實就是這項合約部署的指令。根據這些指令，我們可以在開啟私有鏈的 CMD 環境中執行來部署合約。
Fig. 2. WEB3DEPLOY. 部屬時可能會發生的錯誤訊息 請注意，如果你輸入指令後出現錯誤訊息，可以嘗試以下步驟進行修改，來完成「透過指令來部署合約」。
當你遇到相同的錯誤時，需要更正指令為 new web3.eth.contract。請注意，new 需要刪除，同時 C 需要改為小寫。最後，只需要輸入以下指令： var testContract = web3.eth.contract([...]) Fig. 3. var testContract. 可以呼叫 testContract 出來查看合約。
Fig. 4. testContract. 再來 testContract.deploy 需要改成 testContract.new，然後將註解部分移動到正確位置。
var test = testContract.new({ data: '0x60806...（數字太長省略）', arguments: [], // 將 from 和 gas 移動上來，其餘不變。 from: web3....</p></div><footer class=entry-footer><span title='2022-12-05 19:59:44 +0800 CST'>December 5, 2022</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;178 words&nbsp;·&nbsp;Xubo</footer><a class=entry-link aria-label="post link to 區塊鏈(五) - 在私有鏈上部署智能合約 Part 1" href=https://xubochun.github.io/posts/2022-12-05-deploy-smart-contracts-on-private-chains-1/></a></article><article class=post-entry><header class=entry-header><h2>區塊鏈(四) - 智能合約的開發工具</h2></header><div class=entry-content><p>劇情回顧：
區塊鏈(一) - 建立以太坊私有鏈 區塊鏈(二) - 創建虛擬錢包 區塊鏈(三) - MetaMask 加密貨幣錢包 現在我們已經擁有私有鏈的環境，也有了可以進行挖礦和帳戶，這次稍微進階一點，說一點有關於智能合約。
Remix 介紹一個智能合約編譯器 Remix - Ethereum IDE 可以在上面進行智能合約的撰寫、測試等。
這邊就寫一個簡單的智能合約，我們希望合約來幫助我們做運算，簡單的說明一下，合約中存著一個變數，用戶可以對合約輸入一個數字，合約會將數字乘上 10 倍，並且可以透過公開的變數來查看當前數字是多少。
// SPDX-License-Identifier: MIT pragma solidity ^0.8.4; contract TestContract { uint public number; function multiply(uint a) public { number = a * 10; } } 許多人可能會遇到在 Remix 編譯後警告訊息，若是出現有關「SPDX license identifier」的訊息，就需要在程式碼第一行加入喔！
參考來源：Warning: SPDX license identifier not provided in source file。
Remix compiler 切記寫好程式碼以後，要記得先點選「Compile TestContract.sol」，才會對你的程式碼進行編譯喔！
Fig. 1. solidity compiler. 接下來我們就簡單進行操作一下，來觀察一下合約的執行動作。
先從環境中使用「JavaScript VM」進行合約測試，如果直接將智能合約部署到私有鏈中，想修改都沒辦法喔，只有重新部署一個新的才行，這點要非常注意。...</p></div><footer class=entry-footer><span title='2022-12-05 19:28:48 +0800 CST'>December 5, 2022</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;106 words&nbsp;·&nbsp;Xubo</footer><a class=entry-link aria-label="post link to 區塊鏈(四) - 智能合約的開發工具" href=https://xubochun.github.io/posts/2022-12-04-remix-ide/></a></article><article class=post-entry><header class=entry-header><h2>區塊鏈(三) - MetaMask 加密貨幣錢包</h2></header><div class=entry-content><p>根據前兩集的私有鏈介紹和教學應該有更充分的認識以太坊了吧！
此時的你應該已經擁有一個以太坊私有鏈平台還有無數的虛擬錢包地址，如果你還沒擁有這些趕快到下面的連結去做一個吧！
區塊鏈(一) - 建立以太坊私有鏈 區塊鏈(二) - 創建虛擬錢包 這次將會更詳細的說明所謂的「虛擬錢包」，以及在私有鏈的環境下可以如何使用和應用。
畢竟如果都依靠終端機來操作實在有點乏味，現在就來透過一個管理虛擬錢包的工具，試試看吧！
以太坊虛擬錢包 (Account) 如果還記得，當我們建立好一條「以太坊私有鏈」時，需要在鏈中去創建一個帳戶，此帳戶的用途，大多數是在鏈中進行「發送交易」、「部署智能合約」和「挖礦」的用途。
當我們打開 Ethereum 的資料夾後，可以看到有一個名為「keystore」的資料夾，在裡面所存放的就是「私鑰」，而檔案名稱後面就是你的「公鑰」。
Fig. 1. keystore. MetaMask 當我們透過命令提示字元(CMD)的方式操作以太坊，這樣的動作實在是非常的麻煩，因為不論是交易也好，亦或是查看虛擬貨幣的數量，都需要依靠指令來查詢。
除了 MetaMask 還有很多不同的錢包軟體，可以根據自己上手的使用就可以了。
官方網站中，可以直接下載 Google Chrome 擴充功能，現在更開放 iOS 和 Android 版本提供使用，當擴充功能安裝好以後，就可以開啟了。
Fig. 2. MetaMask. 現在還蠻人性化的，會詢問你是否已經擁有帳戶了，如果沒有，也可以幫你建立一個新的。
Fig. 3. new to MetaMask. 這邊需要你先行建立一個帳號，而這個類似主帳號的概念。
切記，當你創建好一個新帳戶以後，千萬不可以把私鑰給別人，如果別人取得私鑰是可以直接使用你的錢包的。
Fig. 4. secret backup phrase. 登入以後，就是要把我們在私有鏈所創建的帳號給匯入，往後可以透過 MetaMask 來直接對私有鏈進行操作。
先點選右上角頭像，選擇「Import Account」，選擇「JSON File」來把原先存放在 Ethereum 內的 keystore 資料夾檔案放進去。
Fig. 5. import account. 根據經驗來說，匯入之後會等一段時間，匯入以後只需要重開就會看到私有鏈的帳號匯入。
如果還有印象，我們在上集建立好私有鏈以後，有進行挖礦的動作，獲得了 2 塊以太幣，而我們匯入帳戶到 MetaMask 中，也會看到，這邊要注意一下，頭像左邊是選擇伺服器，需要選擇到「Localhost 8545」才會讀取到自己本機端的私有鏈。
Fig. 6....</p></div><footer class=entry-footer><span title='2022-12-03 18:58:11 +0800 CST'>December 3, 2022</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;74 words&nbsp;·&nbsp;Xubo</footer><a class=entry-link aria-label="post link to 區塊鏈(三) - MetaMask 加密貨幣錢包" href=https://xubochun.github.io/posts/2022-12-03-metamask-wallet/></a></article><article class=post-entry><header class=entry-header><h2>區塊鏈(二) - 創建虛擬錢包</h2></header><div class=entry-content><p>在上一篇文章(區塊鏈(一) - 建立以太坊私有鏈)中，我們成功建立了一個私有鏈環境。現在，我們要快速地啟動這個私有鏈。
啟動私有鏈 私有鏈的啟動需要透過指令執行，以下是我使用的簡單指令，你可以根據需要進行修改。
$ geth --identity "TestNode" --networkid 95518 --port "30303" --nodiscover console Fig. 1. start ethereum. 你可以先查看當前的區塊數量，由於我們是透過創世區塊來建立此鏈的，所以當前區塊數量應為 0。
web3.eth.blockNumber Fig. 2. check blockNumber. 查看帳戶餘額 在進行挖礦之前，先檢查一下錢包中有多少虛擬貨幣。
如果你還沒有虛擬錢包，可以使用 Ethereum 提供的 API 來生成一個。這個錢包相關的檔案會放在同一個資料夾中，這樣你以後就可以在不同平台上使用這個錢包。請注意保存好包含私鑰的檔案，一旦丟失，將無法找回！
account = "0x673b06829873d33b6fe13305ae472a6884d7e752" eth.getBalance(account) Fig. 3. get balance. 挖礦 只有在以太坊私有鏈中擁有錢包，我們才能進行挖礦，因為挖出的虛擬貨幣需要一個錢包地址來儲存。
如果你創建了多個錢包，可以使用指令查看本機端當前有多少個虛擬錢包。
web3.eth.accounts Fig. 4. eth account. 既然我們知道當前區塊數為 0，並且已經創建了錢包，接下來就可以進行挖礦了。
你可以在挖礦的指令中設定挖礦次數，當達到指定次數後，它會自動停止。
miner.start(); admin.sleepBlocks(1); miner.stop(); 第一次執行挖礦時，它會執行到進度條達到 100% 後停止。
Fig. 5. genearting DAG. 完成挖礦後，讓我們檢查一下區塊數量，因為我們只進行了一次挖礦，所以區塊數量應為 1。
web3.eth.blockNumber Fig. 6. get blochNumber again. 再來，檢查一下錢包中目前有多少虛擬貨幣。...</p></div><footer class=entry-footer><span title='2022-12-02 00:00:03 +0000 +0000'>December 2, 2022</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;89 words&nbsp;·&nbsp;Xubo</footer><a class=entry-link aria-label="post link to 區塊鏈(二) - 創建虛擬錢包" href=https://xubochun.github.io/posts/2022-12-02-create-ethereum-wallet/></a></article><footer class=page-footer><nav class=pagination><a class=next href=https://xubochun.github.io/posts/page/2/>Next&nbsp;&nbsp;»</a></nav></footer></main><footer class=footer><span>&copy; 2023 <a href=https://xubochun.github.io/>Xubo’Log</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>